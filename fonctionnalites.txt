FonctionnalitÃ© : Effectuer une demande de prÃªt dâ€™un exemplaire
ğŸ¯ Titre
Demander un prÃªt dâ€™un livre

ğŸ¯ Objectif
Permettre Ã  un adhÃ©rent dâ€™effectuer une demande de prÃªt dâ€™un exemplaire disponible, selon ses droits dâ€™abonnement et son quota.

ğŸ‘¤ Acteur principal
AdhÃ©rent

ğŸ” ScÃ©nario nominal
Lâ€™adhÃ©rent se connecte Ã  son compte.

Il accÃ¨de Ã  la liste des exemplaires disponibles.

Il clique sur le bouton "Emprunter" pour un exemplaire.

Le systÃ¨me vÃ©rifie :

Si lâ€™adhÃ©rent est inscrit et que lâ€™abonnement nâ€™est pas expirÃ©.

Sâ€™il nâ€™est pas sous le coup dâ€™une pÃ©nalitÃ© (date du jour > date_fin de la derniÃ¨re pÃ©nalitÃ© non rÃ©glÃ©e).

Sâ€™il lui reste du quota de prÃªt selon son profil (profil.quota_pret - prÃªts en cours).

Si lâ€™exemplaire est marquÃ© comme Disponible.

Si toutes les conditions sont remplies :

Un enregistrement est crÃ©Ã© dans la table pret avec :

idAdherent

idExemplaire

date_pret = aujourdâ€™hui

date_retour_prevue = aujourdâ€™hui + X jours (par dÃ©faut selon le profil)

valide = false (en attente de validation par le bibliothÃ©caire)

Un message de confirmation est affichÃ© : "Votre demande de prÃªt a Ã©tÃ© enregistrÃ©e. Elle est en attente de validation par un bibliothÃ©caire."

âš ï¸ RÃ¨gles de gestion
Un adhÃ©rent doit Ãªtre inscrit (Inscription.date_debut â‰¤ today â‰¤ date_expiration) pour emprunter.

Il ne doit pas Ãªtre pÃ©nalisÃ© (Penalite.date_fin â‰¥ today ET reglee = false).

Son quota de prÃªt ne doit pas Ãªtre dÃ©passÃ© (voir Profil.quota_pret).

Lâ€™exemplaire doit avoir le statut = Disponible.

Un prÃªt est dâ€™abord crÃ©Ã© en Ã©tat non validÃ©, puis validÃ© plus tard par le bibliothÃ©caire.

Un adhÃ©rent peut avoir plusieurs prÃªts simultanÃ©s, dans la limite de son quota.

ğŸ”„ ScÃ©narios alternatifs
Cas	Condition bloquante	RÃ©sultat
A1	Lâ€™utilisateur nâ€™est pas abonnÃ©	Message dâ€™erreur : "Votre abonnement est expirÃ©. Veuillez vous rÃ©inscrire."
A2	Il est sous pÃ©nalitÃ© active	Message dâ€™erreur : "Vous Ãªtes actuellement pÃ©nalisÃ© jusquâ€™au ..."
A3	Il nâ€™a plus de quota	Message dâ€™erreur : "Quota de prÃªt atteint."
A4	Lâ€™exemplaire nâ€™est pas disponible	Message dâ€™erreur : "Ce livre nâ€™est pas disponible pour le moment."

âœ… RÃ©sultat attendu
La demande est enregistrÃ©e dans la table pret.

Le bibliothÃ©caire pourra valider ou refuser la demande.